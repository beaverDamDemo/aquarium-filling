"use strict";
"use strict";!function(){function e(e){jQuery.each(e,function(e,t){A.push(t.displacement),I++}),window.arrayOfDisplacements=A,window.aquariumDisplacement=G,$.getJSON(q).done(t).fail(function(){console.log("Request failed: "+err)})}function t(e){function t(e){for(var t,n,a=e.length;a;t=parseInt(Math.random()*a),n=e[--a],e[a]=e[t],e[t]=n);return e}try{p=e.parameters.page_title[0].value,l=e.parameters.background_color[0].value,m=e.parameters.background_right_shape_color[0].value,f=parseFloat(e.parameters.background_right_shape_opacity[0].value),b=e.parameters.header_text[0].value,h=e.parameters.header_allCaps[0].value,v=e.parameters.header_fontBold[0].value,C=e.parameters.header_textAlignCenter[0].value,_=e.parameters.header_fontSize[0].value,k=e.parameters.buttonCheck_text[0].value,x=e.parameters.buttonCheck_background_color[0].value,w=e.parameters.buttonCheck_hover_bgr_color[0].value,S=e.parameters.feedback_buttons_on_curvedPath[0].value,y=e.parameters.final_greeting_message[0].value,T=e.parameters.final_greeting_button_text[0].value,U=e.parameters.numberToBeComposed_min[0].value,N=e.parameters.numberToBeComposed_max[0].value,B=e.parameters.number_of_examples[0].value}catch(q){console.warn("Error reading podiumdata: ",q)}window.number_of_examples=B,window.fillNumbersToBeComposed=function(){E=[],E.push(10),E.push(15),E.push(20),E.push(2),t(E)},fillNumbersToBeComposed(),window.populateMainContent=function(e){W=E[e],window.numberToBeComposed=W,minimumScrufadorUnits=d(W),window.minimumScrufadorUnits=minimumScrufadorUnits,$(".main__num p").text(W),n(e),$(".currentContent .currentContent__inner .number").text("0")},a(g,m,l),r(),populateMainContent(0),o(),s(),i(),u(y,T),c(B,S),$("#buttonCheck p").text(k),$("#buttonCheck").css({"background-color":x}),createDraggable()}function n(e){$(".numberToBeComposed .numberToBeComposed__inner .number").text(E[e])}function a(e,t,n){function a(e){Snap(e.node).select("#rightShape path").attr("fill",m),o.append(e)}if($("#wrapper").css({"background-color":n}),void 0!=e){var r=e;imageExists(r,function(t){1==t&&$("#wrapper").css({"background-image":"url("+e+")"})})}var o=Snap("#svg_right_shape");Snap.load("assets/images/rightShape2.svg",a),$("#svg_right_shape").css({opacity:f})}function r(){document.title=p,$("#headingWrapper #heading p").html(b),"TRUE"==h.toUpperCase()&&$("#headingWrapper #heading p").css({"text-transform":"uppercase"}),"TRUE"==v.toUpperCase()&&$("#headingWrapper #heading p").css({"font-weight":"bold"}),"TRUE"==C.toUpperCase()&&$("#headingWrapper #heading p").css({"text-align":"center"}),$("#headingWrapper #heading p").css({"font-size":_+"px"})}function o(){function e(e){M.append(e),$("#buttonNext").on("mouseleave",function(){}),$("#buttonNext").on("mouseenter",function(){})}Snap.load("assets/images/buttonNext.svg",e)}function s(){$("#buttonCheck p").text(k),$("#buttonCheck").css({"background-color":x}),$("#buttonCheck").hover(function(){$(this).css({"background-color":w})}),$("#buttonCheck").mouseleave(function(){$(this).css({"background-color":x})})}function i(){for(var e=0;I>e;e++){var t=A[e];$(".scrufadorWrapper").append("<div class='scrufador scrufador__0"+e+"' id='scrufadorId_"+e+"'><div class='scrufadorInner'><p>"+t+"<span>&thinsp;&thinsp;l</span></p></div></div>");try{$(".scrufador__0"+e+" .scrufadorInner").css({"background-image":"url(assets/images/skrufador.png)"})}catch(n){console.error("Error loading scrufadors: ",n)}}}function u(e,t){$(".finalGreeting .finalGreeting__message p").text(e),$(".finalGreeting .finalGreeting_button p").text(t)}function c(e,t){for(var n=0;e>n;n++)"TRUE"==t.toUpperCase()?$("#feedbackWrapper #feedbackContent").append("<div class='feedback-items curved'></div>"):$("#feedbackWrapper #feedbackContent").append("<div class='feedback-items'></div>")}function d(e){for(var t,n=0,a=A.length-1;e>0;)if(t=e/A[a],1>t)a--;else{var r=Math.floor(e/A[a]);e-=Math.floor(e/A[a])*A[a],n+=r,a--}return window.minimumScrufadorUnits=n,n}var p,l,m,f,g,b,h,v,C,_,k,w,x,S,y,T,B,W,U,N,q="data.json",R="wateringCans.json",B=0,E=[],A=[],I=0,G=100;$.getJSON(R).done(e).fail(function(){console.log("Request failed: "+err)});var M=Snap("#buttonNext")}();
"use strict";function createDraggable(){var e;Draggable.create(".scrufador",{bounds:window,onDragStart:function(){e=$(this.target).find(".scrufadorInner").position(),droppable=this.target,droppable.startX=this.x,droppable.startY=this.y,this.startX=this.x,this.startY=this.y},onDragEnd:function(){if($("#wrapper").addClass("disabled"),this.hitTest(".maincontent__image","50%")){$(this.target).find(".scrufadorInner").addClass("hiding");var e=$(droppable).attr("id").slice(-1);addWaterToAquarium(e),droppedScrufadorUnits++,$(".scrufador .scrufadorInner.hiding").one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){TweenLite.to(droppable,.3,{x:0,y:0,onComplete:function(){$(droppable).removeClass("hiding"),$(droppable).find(".scrufadorInner").removeClass("hiding"),$("#wrapper").removeClass("disabled")}})})}else TweenLite.to(this.target,.3,{x:0,y:0}),$("#wrapper").removeClass("disabled")}})}function addWaterToAquarium(e){try{var t=arrayOfDisplacements[e];updateCurrentContent(t,aquariumContent),aquariumContent=1*aquariumContent+1*t,moveWater()}catch(n){console.warn(n),console.warn("value: ",t)}}function updateCurrentContent(e){$(".currentContent .number").prop("Counter",aquariumContent).animate({Counter:parseInt(aquariumContent)+parseInt(e)},{duration:1600,easing:"swing",step:function(e){$(this).text(Math.ceil(e))}})}function moveWater(){var e=100-aquariumContent/aquariumDisplacement*100;0>e&&(e=0);var t=200+8*e;$(".maincontent__water").css({top:e+"%","transition-duration":t+"ms","transition-property":"all","transition-timing-function":"ease-in-out"})}function updateFeedbackItems(){$(".feedback-items:not(.active):first").addClass("active"),$(".feedback-items.active").length==number_of_examples?($(".finalGreeting").addClass("active"),$(".buttons").addClass("disabled")):console.log("Lesson not completed yet")}function checkResult(e){return console.log("s: ",e,"numberToBeComposed",numberToBeComposed),e==numberToBeComposed&&droppedScrufadorUnits==minimumScrufadorUnits?!0:!1}function lightReset(){droppedScrufadorUnits=0,aquariumContent=0,$(".currentContent .currentContent__inner .number").text("0"),moveWater()}function loadNextLesson(){lightReset(),populateMainContent($(".feedback-items.active").length)}function hardReset(){lightReset(),populateMainContent(0),resetCounters(),fillNumbersToBeComposed(),$("#feedbackContent .feedback-items").removeClass("solved"),$("#wrapper").removeClass("disabled")}function playAgain(){$("#wrapper").addClass("disabled"),hardReset(),$(".finalGreeting").removeClass("active"),$(".buttons").removeClass("disabled"),$("#buttonCheckWrapper").addClass("active"),$("#buttonNextWrapper").removeClass("active")}function resetCounters(){$(".solved").removeClass("solved"),$(".feedback-items").removeClass("active")}var droppable,droppedScrufadorUnits=0,aquariumContent=0;$("#buttonCheck").on("click",function(){console.log("checkResult(aquariumContent): ",checkResult(aquariumContent)),checkResult(aquariumContent)?(updateFeedbackItems(),$("#buttonNextWrapper").addClass("active"),$("#buttonCheckWrapper").removeClass("active")):($(this).addClass("rubberBand"),$(this).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass("rubberBand")}),lightReset())}),$("#buttonNext").on("click",function(){$("#buttonCheckWrapper").addClass("active"),$("#buttonNextWrapper").removeClass("active"),loadNextLesson()}),$(".finalGreeting .finalGreeting_button").on("click",function(){playAgain()}),$("body").on("keydown",function(e){27==e.which&&$(".finalGreeting").hasClass("active")&&(console.log("triggering closebutton"),$(".closeButton.finalGreeting__closeBtn").trigger("click"))}),$("#closeButton").on("click",function(){window.history.back()}),$(".closeButton.finalGreeting__closeBtn").on("click",function(){playAgain()});
